/*C10*/SET SCHEMA PUBLIC
alter table electronic_device drop constraint FK1E17C579EA50FDFE
alter table heater drop constraint FKB7351E9DEA50FDFE
alter table home drop constraint FK30F4DF5C04D206
alter table intelligent_devices drop constraint FK49C33B1544928464
alter table person_person drop constraint FKBFFF837F903C77E4
alter table person_person drop constraint FKBFFF837F2BBDCE24
drop table electronic_device if exists
drop table heater if exists
drop table home if exists
drop table intelligent_devices if exists
drop table person if exists
drop table person_person if exists
create table electronic_device (name varchar(255), id bigint not null, primary key (id))
create table heater (source varchar(255), id bigint not null, primary key (id))
create table home (id bigint generated by default as identity (start with 1), adresse varchar(255), rooms integer, surf integer, ville varchar(255), owner_id bigint, primary key (id))
create table intelligent_devices (id bigint generated by default as identity (start with 1), consoAvg integer, ref varchar(255), home_id bigint, primary key (id))
create table person (id bigint generated by default as identity (start with 1), mail varchar(255), name varchar(255), surname varchar(255), primary key (id))
create table person_person (person_id bigint not null, friends_id bigint not null)
alter table electronic_device add constraint FK1E17C579EA50FDFE foreign key (id) references intelligent_devices
alter table heater add constraint FKB7351E9DEA50FDFE foreign key (id) references intelligent_devices
alter table home add constraint FK30F4DF5C04D206 foreign key (owner_id) references person
alter table intelligent_devices add constraint FK49C33B1544928464 foreign key (home_id) references home
alter table person_person add constraint FKBFFF837F903C77E4 foreign key (friends_id) references person
alter table person_person add constraint FKBFFF837F2BBDCE24 foreign key (person_id) references person
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
alter table electronic_device drop constraint FK1E17C579EA50FDFE
alter table heater drop constraint FKB7351E9DEA50FDFE
alter table home drop constraint FK30F4DF5C04D206
alter table intelligent_devices drop constraint FK49C33B1544928464
alter table person_person drop constraint FKBFFF837F903C77E4
alter table person_person drop constraint FKBFFF837F2BBDCE24
drop table electronic_device if exists
drop table heater if exists
drop table home if exists
drop table intelligent_devices if exists
drop table person if exists
drop table person_person if exists
create table electronic_device (name varchar(255), id bigint not null, primary key (id))
create table heater (source varchar(255), id bigint not null, primary key (id))
create table home (id bigint generated by default as identity (start with 1), adresse varchar(255), rooms integer, surf integer, ville varchar(255), owner_id bigint, primary key (id))
create table intelligent_devices (id bigint generated by default as identity (start with 1), consoAvg integer, ref varchar(255), home_id bigint, primary key (id))
create table person (id bigint generated by default as identity (start with 1), mail varchar(255), name varchar(255), surname varchar(255), primary key (id))
create table person_person (person_id bigint not null, friends_id bigint not null)
alter table electronic_device add constraint FK1E17C579EA50FDFE foreign key (id) references intelligent_devices
alter table heater add constraint FKB7351E9DEA50FDFE foreign key (id) references intelligent_devices
alter table home add constraint FK30F4DF5C04D206 foreign key (owner_id) references person
alter table intelligent_devices add constraint FK49C33B1544928464 foreign key (home_id) references home
alter table person_person add constraint FKBFFF837F903C77E4 foreign key (friends_id) references person
alter table person_person add constraint FKBFFF837F2BBDCE24 foreign key (person_id) references person
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
alter table electronic_device drop constraint FK1E17C579EA50FDFE
alter table heater drop constraint FKB7351E9DEA50FDFE
alter table home drop constraint FK30F4DF5C04D206
alter table intelligent_devices drop constraint FK49C33B1544928464
alter table person_person drop constraint FKBFFF837F903C77E4
alter table person_person drop constraint FKBFFF837F2BBDCE24
drop table electronic_device if exists
drop table heater if exists
drop table home if exists
drop table intelligent_devices if exists
drop table person if exists
drop table person_person if exists
create table electronic_device (name varchar(255), id bigint not null, primary key (id))
create table heater (source varchar(255), id bigint not null, primary key (id))
create table home (id bigint generated by default as identity (start with 1), adresse varchar(255), rooms integer, surf integer, ville varchar(255), owner_id bigint, primary key (id))
create table intelligent_devices (id bigint generated by default as identity (start with 1), consoAvg integer, ref varchar(255), home_id bigint, primary key (id))
create table person (id bigint generated by default as identity (start with 1), mail varchar(255), name varchar(255), surname varchar(255), primary key (id))
create table person_person (person_id bigint not null, friends_id bigint not null)
alter table electronic_device add constraint FK1E17C579EA50FDFE foreign key (id) references intelligent_devices
alter table heater add constraint FKB7351E9DEA50FDFE foreign key (id) references intelligent_devices
alter table home add constraint FK30F4DF5C04D206 foreign key (owner_id) references person
alter table intelligent_devices add constraint FK49C33B1544928464 foreign key (home_id) references home
alter table person_person add constraint FKBFFF837F903C77E4 foreign key (friends_id) references person
alter table person_person add constraint FKBFFF837F2BBDCE24 foreign key (person_id) references person
/*C13*/SET SCHEMA PUBLIC
alter table electronic_device drop constraint FK1E17C579EA50FDFE
alter table heater drop constraint FKB7351E9DEA50FDFE
/*C12*/DISCONNECT
/*C13*/alter table home drop constraint FK30F4DF5C04D206
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
alter table intelligent_devices drop constraint FK49C33B1544928464
alter table person_person drop constraint FKBFFF837F903C77E4
alter table person_person drop constraint FKBFFF837F2BBDCE24
drop table electronic_device if exists
drop table heater if exists
drop table home if exists
drop table home_intelligent_devices if exists
drop table intelligent_devices if exists
drop table person if exists
drop table person_home if exists
drop table person_person if exists
create table electronic_device (name varchar(255), id bigint not null, primary key (id))
create table heater (source varchar(255), id bigint not null, primary key (id))
create table home (id bigint generated by default as identity (start with 1), adresse varchar(255), rooms integer, surf integer, ville varchar(255), owner_id bigint, primary key (id))
create table home_intelligent_devices (home_id bigint not null, devices_id bigint not null, unique (devices_id))
create table intelligent_devices (id bigint generated by default as identity (start with 1), consoAvg integer, ref varchar(255), home_id bigint, primary key (id))
create table person (id bigint generated by default as identity (start with 1), mail varchar(255), name varchar(255), surname varchar(255), primary key (id))
create table person_home (person_id bigint not null, homes_id bigint not null, unique (homes_id))
create table person_person (person_id bigint not null, friends_id bigint not null)
alter table electronic_device add constraint FK1E17C579EA50FDFE foreign key (id) references intelligent_devices
alter table heater add constraint FKB7351E9DEA50FDFE foreign key (id) references intelligent_devices
alter table home add constraint FK30F4DF5C04D206 foreign key (owner_id) references person
alter table home_intelligent_devices add constraint FKA3E97B518EEACA0 foreign key (devices_id) references intelligent_devices
alter table home_intelligent_devices add constraint FKA3E97B544928464 foreign key (home_id) references home
alter table intelligent_devices add constraint FK49C33B1544928464 foreign key (home_id) references home
alter table person_home add constraint FKE69CDF89E6844DAF foreign key (homes_id) references home
alter table person_home add constraint FKE69CDF892BBDCE24 foreign key (person_id) references person
alter table person_person add constraint FKBFFF837F903C77E4 foreign key (friends_id) references person
alter table person_person add constraint FKBFFF837F2BBDCE24 foreign key (person_id) references person
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
alter table electronic_device drop constraint FK1E17C579EA50FDFE
alter table heater drop constraint FKB7351E9DEA50FDFE
alter table home drop constraint FK30F4DF5C04D206
alter table home_intelligent_devices drop constraint FKA3E97B518EEACA0
alter table home_intelligent_devices drop constraint FKA3E97B544928464
alter table intelligent_devices drop constraint FK49C33B1544928464
alter table person_home drop constraint FKE69CDF89E6844DAF
alter table person_home drop constraint FKE69CDF892BBDCE24
alter table person_person drop constraint FKBFFF837F903C77E4
alter table person_person drop constraint FKBFFF837F2BBDCE24
drop table electronic_device if exists
drop table heater if exists
drop table home if exists
drop table home_intelligent_devices if exists
drop table intelligent_devices if exists
drop table person if exists
drop table person_home if exists
drop table person_person if exists
create table electronic_device (name varchar(255), id bigint not null, primary key (id))
create table heater (source varchar(255), id bigint not null, primary key (id))
create table home (id bigint generated by default as identity (start with 1), adresse varchar(255), rooms integer, surf integer, ville varchar(255), owner_id bigint, primary key (id))
create table home_intelligent_devices (home_id bigint not null, devices_id bigint not null, unique (devices_id))
create table intelligent_devices (id bigint generated by default as identity (start with 1), consoAvg integer, ref varchar(255), home_id bigint, primary key (id))
create table person (id bigint generated by default as identity (start with 1), mail varchar(255), name varchar(255), surname varchar(255), primary key (id))
create table person_home (person_id bigint not null, homes_id bigint not null, unique (homes_id))
create table person_person (person_id bigint not null, friends_id bigint not null)
alter table electronic_device add constraint FK1E17C579EA50FDFE foreign key (id) references intelligent_devices
alter table heater add constraint FKB7351E9DEA50FDFE foreign key (id) references intelligent_devices
alter table home add constraint FK30F4DF5C04D206 foreign key (owner_id) references person
alter table home_intelligent_devices add constraint FKA3E97B518EEACA0 foreign key (devices_id) references intelligent_devices
alter table home_intelligent_devices add constraint FKA3E97B544928464 foreign key (home_id) references home
alter table intelligent_devices add constraint FK49C33B1544928464 foreign key (home_id) references home
alter table person_home add constraint FKE69CDF89E6844DAF foreign key (homes_id) references home
alter table person_home add constraint FKE69CDF892BBDCE24 foreign key (person_id) references person
alter table person_person add constraint FKBFFF837F903C77E4 foreign key (friends_id) references person
alter table person_person add constraint FKBFFF837F2BBDCE24 foreign key (person_id) references person
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
alter table electronic_device drop constraint FK1E17C579EA50FDFE
alter table heater drop constraint FKB7351E9DEA50FDFE
alter table home drop constraint FK30F4DF5C04D206
alter table home_intelligent_devices drop constraint FKA3E97B518EEACA0
alter table home_intelligent_devices drop constraint FKA3E97B544928464
alter table intelligent_devices drop constraint FK49C33B1544928464
alter table person_home drop constraint FKE69CDF89E6844DAF
alter table person_home drop constraint FKE69CDF892BBDCE24
alter table person_person drop constraint FKBFFF837F903C77E4
alter table person_person drop constraint FKBFFF837F2BBDCE24
drop table electronic_device if exists
drop table heater if exists
drop table home if exists
drop table home_intelligent_devices if exists
drop table intelligent_devices if exists
drop table person if exists
drop table person_home if exists
drop table person_person if exists
create table electronic_device (name varchar(255), id bigint not null, primary key (id))
create table heater (source varchar(255), id bigint not null, primary key (id))
create table home (id bigint generated by default as identity (start with 1), adresse varchar(255), rooms integer, surf integer, ville varchar(255), owner_id bigint, primary key (id))
create table home_intelligent_devices (home_id bigint not null, devices_id bigint not null, unique (devices_id))
create table intelligent_devices (id bigint generated by default as identity (start with 1), consoAvg integer, ref varchar(255), home_id bigint, primary key (id))
create table person (id bigint generated by default as identity (start with 1), mail varchar(255), name varchar(255), surname varchar(255), primary key (id))
create table person_home (person_id bigint not null, homes_id bigint not null, unique (homes_id))
create table person_person (person_id bigint not null, friends_id bigint not null)
alter table electronic_device add constraint FK1E17C579EA50FDFE foreign key (id) references intelligent_devices
alter table heater add constraint FKB7351E9DEA50FDFE foreign key (id) references intelligent_devices
alter table home add constraint FK30F4DF5C04D206 foreign key (owner_id) references person
alter table home_intelligent_devices add constraint FKA3E97B518EEACA0 foreign key (devices_id) references intelligent_devices
alter table home_intelligent_devices add constraint FKA3E97B544928464 foreign key (home_id) references home
alter table intelligent_devices add constraint FK49C33B1544928464 foreign key (home_id) references home
alter table person_home add constraint FKE69CDF89E6844DAF foreign key (homes_id) references home
alter table person_home add constraint FKE69CDF892BBDCE24 foreign key (person_id) references person
alter table person_person add constraint FKBFFF837F903C77E4 foreign key (friends_id) references person
alter table person_person add constraint FKBFFF837F2BBDCE24 foreign key (person_id) references person
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
alter table electronic_device drop constraint FK1E17C579EA50FDFE
alter table heater drop constraint FKB7351E9DEA50FDFE
alter table intelligent_devices drop constraint FK49C33B1544928464
alter table person_person drop constraint FKBFFF837F903C77E4
alter table person_person drop constraint FKBFFF837F2BBDCE24
drop table Home_intelligent_devices if exists
drop table electronic_device if exists
drop table heater if exists
drop table intelligent_devices if exists
drop table person_person if exists
create table Home_intelligent_devices (Home_id bigint not null, devices_id bigint not null, unique (devices_id))
create table electronic_device (name varchar(255), id bigint not null, primary key (id))
create table heater (source varchar(255), id bigint not null, primary key (id))
create table intelligent_devices (id bigint generated by default as identity (start with 1), consoAvg integer, ref varchar(255), home_id bigint, primary key (id))
create table person_person (person_id bigint not null, friends_id bigint not null)
alter table Home_intelligent_devices add constraint FK8A0CBBD518EEACA0 foreign key (devices_id) references intelligent_devices
alter table Home_intelligent_devices add constraint FK8A0CBBD544928464 foreign key (Home_id) references Home
alter table electronic_device add constraint FK1E17C579EA50FDFE foreign key (id) references intelligent_devices
alter table heater add constraint FKB7351E9DEA50FDFE foreign key (id) references intelligent_devices
alter table intelligent_devices add constraint FK49C33B1544928464 foreign key (home_id) references Home
alter table person_person add constraint FKBFFF837F903C77E4 foreign key (friends_id) references person
alter table person_person add constraint FKBFFF837F2BBDCE24 foreign key (person_id) references person
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
alter table Home add column HOME_ID bigint
alter table Home add constraint FK2268FF3A04905A foreign key (HOME_ID) references person
INSERT INTO PERSON VALUES(3,'ao@','ao','let')
COMMIT
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
INSERT INTO HOME VALUES(3,'4 rue',1,10,'stG',3,NULL)
DELETE FROM HOME WHERE ID=3
INSERT INTO HOME VALUES(3,'4 rue',1,10,'stG',3,3)
COMMIT
DISCONNECT
